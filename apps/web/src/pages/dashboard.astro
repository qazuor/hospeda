---
import { SignOutButton } from '@repo/auth-ui';
import MainLayout from '../layout/MainLayout.astro';

// Check if user is authenticated using Clerk's server-side helpers
const { auth } = Astro.locals;
const { userId } = auth();

// If not authenticated, redirect to sign in
if (!userId) {
    return Astro.redirect('/auth/signin/');
}

const title = 'Dashboard - Hospeda';
const description = 'Tu panel de control personal en Hospeda.';
---

<MainLayout title={title} description={description}>
    <main class='min-h-screen bg-gray-50 py-8'>
        <div class='max-w-7xl mx-auto px-4 sm:px-6 lg:px-8'>
            <!-- Header -->
            <div class='bg-white shadow rounded-lg mb-8'>
                <div class='px-6 py-4 border-b border-gray-200'>
                    <div class='flex items-center justify-between'>
                        <div>
                            <h1 class='text-2xl font-bold text-gray-900'>Dashboard</h1>
                            <p class='mt-1 text-sm text-gray-600'>Bienvenido a tu panel de control personal</p>
                        </div>
                        <div class='flex items-center space-x-4'>
                            <SignOutButton
                                client:load
                                apiBaseUrl={import.meta.env.PUBLIC_API_URL || 'http://localhost:3001'}
                                redirectTo='/'
                            />
                        </div>
                    </div>
                </div>
            </div>

            <!-- Dashboard Content -->
            <div class='grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6'>
                <!-- User Info Card -->
                <div class='bg-white shadow rounded-lg p-6'>
                    <div class='flex items-center'>
                        <div class='flex-shrink-0'>
                            <div
                                class='w-12 h-12 bg-gradient-to-r from-cyan-500 to-green-500 rounded-full flex items-center justify-center'
                            >
                                <svg class='w-6 h-6 text-white' fill='none' stroke='currentColor' viewBox='0 0 24 24'>
                                    <path
                                        stroke-linecap='round'
                                        stroke-linejoin='round'
                                        stroke-width='2'
                                        d='M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z'></path>
                                </svg>
                            </div>
                        </div>
                        <div class='ml-4'>
                            <h3 class='text-lg font-medium text-gray-900'>Perfil de Usuario</h3>
                            <p class='text-sm text-gray-600'>ID: {userId}</p>
                        </div>
                    </div>
                    <div class='mt-4'>
                        <p class='text-sm text-gray-500'>Tu información personal y configuración de cuenta.</p>
                    </div>
                </div>

                <!-- Bookmarks Card -->
                <div class='bg-white shadow rounded-lg p-6'>
                    <div class='flex items-center'>
                        <div class='flex-shrink-0'>
                            <div
                                class='w-12 h-12 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center'
                            >
                                <svg class='w-6 h-6 text-white' fill='none' stroke='currentColor' viewBox='0 0 24 24'>
                                    <path
                                        stroke-linecap='round'
                                        stroke-linejoin='round'
                                        stroke-width='2'
                                        d='M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z'></path>
                                </svg>
                            </div>
                        </div>
                        <div class='ml-4'>
                            <h3 class='text-lg font-medium text-gray-900'>Favoritos</h3>
                            <p class='text-sm text-gray-600'>0 alojamientos guardados</p>
                        </div>
                    </div>
                    <div class='mt-4'>
                        <p class='text-sm text-gray-500'>Tus alojamientos y destinos favoritos.</p>
                    </div>
                </div>

                <!-- Recent Activity Card -->
                <div class='bg-white shadow rounded-lg p-6'>
                    <div class='flex items-center'>
                        <div class='flex-shrink-0'>
                            <div
                                class='w-12 h-12 bg-gradient-to-r from-orange-500 to-red-500 rounded-full flex items-center justify-center'
                            >
                                <svg class='w-6 h-6 text-white' fill='none' stroke='currentColor' viewBox='0 0 24 24'>
                                    <path
                                        stroke-linecap='round'
                                        stroke-linejoin='round'
                                        stroke-width='2'
                                        d='M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z'></path>
                                </svg>
                            </div>
                        </div>
                        <div class='ml-4'>
                            <h3 class='text-lg font-medium text-gray-900'>Actividad Reciente</h3>
                            <p class='text-sm text-gray-600'>Sin actividad</p>
                        </div>
                    </div>
                    <div class='mt-4'>
                        <p class='text-sm text-gray-500'>Tu actividad reciente en la plataforma.</p>
                    </div>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class='mt-8 bg-white shadow rounded-lg p-6'>
                <h2 class='text-lg font-medium text-gray-900 mb-4'>Acciones Rápidas</h2>
                <div class='grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4'>
                    <a
                        href='/alojamientos/'
                        class='flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors'
                    >
                        <svg class='w-8 h-8 text-cyan-500 mr-3' fill='none' stroke='currentColor' viewBox='0 0 24 24'>
                            <path
                                stroke-linecap='round'
                                stroke-linejoin='round'
                                stroke-width='2'
                                d='M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4'
                            ></path>
                        </svg>
                        <div>
                            <p class='font-medium text-gray-900'>Explorar Alojamientos</p>
                            <p class='text-sm text-gray-600'>Descubre nuevos lugares</p>
                        </div>
                    </a>

                    <a
                        href='/destinos/'
                        class='flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors'
                    >
                        <svg class='w-8 h-8 text-green-500 mr-3' fill='none' stroke='currentColor' viewBox='0 0 24 24'>
                            <path
                                stroke-linecap='round'
                                stroke-linejoin='round'
                                stroke-width='2'
                                d='M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z'
                            ></path>
                            <path
                                stroke-linecap='round'
                                stroke-linejoin='round'
                                stroke-width='2'
                                d='M15 11a3 3 0 11-6 0 3 3 0 016 0z'></path>
                        </svg>
                        <div>
                            <p class='font-medium text-gray-900'>Ver Destinos</p>
                            <p class='text-sm text-gray-600'>Explora destinos únicos</p>
                        </div>
                    </a>

                    <a
                        href='/eventos/'
                        class='flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors'
                    >
                        <svg class='w-8 h-8 text-purple-500 mr-3' fill='none' stroke='currentColor' viewBox='0 0 24 24'>
                            <path
                                stroke-linecap='round'
                                stroke-linejoin='round'
                                stroke-width='2'
                                d='M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z'
                            ></path>
                        </svg>
                        <div>
                            <p class='font-medium text-gray-900'>Eventos</p>
                            <p class='text-sm text-gray-600'>Descubre eventos locales</p>
                        </div>
                    </a>

                    <a
                        href='/blog/'
                        class='flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors'
                    >
                        <svg class='w-8 h-8 text-orange-500 mr-3' fill='none' stroke='currentColor' viewBox='0 0 24 24'>
                            <path
                                stroke-linecap='round'
                                stroke-linejoin='round'
                                stroke-width='2'
                                d='M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z'
                            ></path>
                        </svg>
                        <div>
                            <p class='font-medium text-gray-900'>Blog</p>
                            <p class='text-sm text-gray-600'>Lee nuestros artículos</p>
                        </div>
                    </a>
                </div>
            </div>
        </div>
    </main>
</MainLayout>
