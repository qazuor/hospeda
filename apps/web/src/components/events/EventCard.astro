---
import Badge from '@/components/common/Badge.astro';
import Icon from '@/components/common/Icon.astro';
import { formatDate, getEventUrl } from '@/utils';

const { event } = Astro.props;
const eventUrl = getEventUrl(event) || '';
const formattedDate = event.date ? formatDate(new Date(event.date.start)) : '';
---

<a href={eventUrl} class='block group rounded-lg overflow-hidden shadow hover:shadow-lg transition'>
    <figure class='relative w-full h-48 overflow-hidden'>
        {
            event.media?.featuredImage && (
                <img
                    src={event.media?.featuredImage?.url || '/images/placeholder.jpg'}
                    alt={event.name}
                    class='w-full h-full object-cover group-hover:scale-105 transition-transform duration-300'
                    loading='lazy'
                />
            )
        }
        {
            event.category && (
                <div class='absolute top-2 left-2'>
                    <Badge color='accent'>{event.category}</Badge>
                </div>
            )
        }
    </figure>

    <div class='p-4'>
        <h3 class='text-lg font-semibold text-primary-900 group-hover:text-primary-700 transition'>
            {event.name}
        </h3>
        <div class='text-sm text-gray-600 dark:text-gray-400 mt-1 flex items-center gap-2'>
            <Icon name='calendar' class='w-4 h-4' />
            <span>{formattedDate}</span>
        </div>
        {
            event.destination?.name && (
                <div class='text-sm text-gray-600 dark:text-gray-400 mt-1 flex items-center gap-2'>
                    <Icon name='map-pin' class='w-4 h-4' />
                    <span>{event.destination.name}</span>
                </div>
            )
        }
    </div>
</a>
