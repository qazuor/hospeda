# =============================================================================
# HOSPEDA - Environment Variables Configuration
# =============================================================================
# üî¥ REQUIRED = Must be set for the application to work
# üü° OPTIONAL = Has defaults, can be customized
# =============================================================================

# =============================================================================
# üåç GENERAL CONFIGURATION
# =============================================================================
NODE_ENV=development                                    # üü° OPTIONAL (default: development)
PUBLIC_SITE_URL=http://localhost:4321                  # üî¥ REQUIRED for Astro

# =============================================================================
# üóÑÔ∏è DATABASE CONFIGURATION
# =============================================================================
DATABASE_URL=postgresql://user:password@localhost:5432/hospeda  # üî¥ REQUIRED

# Database Pool Configuration
DB_POOL_MAX_CONNECTIONS=10                             # üü° OPTIONAL (default: 10)
DB_POOL_IDLE_TIMEOUT_MS=30000                          # üü° OPTIONAL (default: 30000)
DB_POOL_CONNECTION_TIMEOUT_MS=2000                     # üü° OPTIONAL (default: 2000)

# =============================================================================
# üöÄ API CONFIGURATION
# =============================================================================
API_PORT=3001                                          # üü° OPTIONAL (default: 3001)
API_HOST=localhost                                     # üü° OPTIONAL (default: localhost)
PUBLIC_API_BASE_URL=http://localhost:3001              # üî¥ REQUIRED for frontend apps

# =============================================================================
# üîê AUTHENTICATION (Clerk)
# =============================================================================
PUBLIC_CLERK_PUBLISHABLE_KEY=pk_test_your_key_here     # üî¥ REQUIRED for auth
CLERK_SECRET_KEY=sk_test_your_secret_here              # üî¥ REQUIRED for auth
CLERK_WEBHOOK_SECRET=whsec_your_webhook_secret         # üü° OPTIONAL (only if using webhooks)

# =============================================================================
# üìù LOGGING CONFIGURATION
# =============================================================================
LOG_LEVEL=info                                         # üü° OPTIONAL (default: info)
ENABLE_REQUEST_LOGGING=true                            # üü° OPTIONAL (default: true)

# Log Formatting
LOG_INCLUDE_TIMESTAMPS=true                            # üü° OPTIONAL (default: true)
LOG_INCLUDE_LEVEL=true                                 # üü° OPTIONAL (default: true)
LOG_USE_COLORS=true                                    # üü° OPTIONAL (default: true)
LOG_SAVE=false                                         # üü° OPTIONAL (default: false)
LOG_EXPAND_OBJECTS=false                               # üü° OPTIONAL (default: false)
LOG_TRUNCATE_TEXT=true                                 # üü° OPTIONAL (default: true)
LOG_TRUNCATE_AT=1000                                   # üü° OPTIONAL (default: 1000)
LOG_STRINGIFY=false                                    # üü° OPTIONAL (default: false)

# =============================================================================
# üåê CORS CONFIGURATION
# =============================================================================
CORS_ORIGINS=http://localhost:3000,http://localhost:4321,http://localhost:5173  # üü° OPTIONAL (has defaults)
CORS_ALLOW_CREDENTIALS=true                            # üü° OPTIONAL (default: true)
CORS_MAX_AGE=86400                                     # üü° OPTIONAL (default: 86400)
CORS_ALLOW_METHODS=GET,POST,PUT,DELETE,PATCH,OPTIONS   # üü° OPTIONAL (has defaults)
CORS_ALLOW_HEADERS=Content-Type,Authorization,X-Requested-With  # üü° OPTIONAL (has defaults)
CORS_EXPOSE_HEADERS=Content-Length,X-Request-ID       # üü° OPTIONAL (has defaults)

# =============================================================================
# üíæ CACHE CONFIGURATION
# =============================================================================
CACHE_ENABLED=true
CACHE_DEFAULT_MAX_AGE=300
CACHE_DEFAULT_STALE_WHILE_REVALIDATE=60
CACHE_DEFAULT_STALE_IF_ERROR=86400
CACHE_PUBLIC_ENDPOINTS=/api/v1/public/accommodations,/health
CACHE_PRIVATE_ENDPOINTS=/api/v1/public/users
CACHE_NO_CACHE_ENDPOINTS=/health/db,/docs
CACHE_ETAG_ENABLED=true
CACHE_LAST_MODIFIED_ENABLED=true

# =============================================================================
# üö¶ RATE LIMITING CONFIGURATION
# =============================================================================
# General Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_KEY_GENERATOR=ip
RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS=false
RATE_LIMIT_SKIP_FAILED_REQUESTS=false
RATE_LIMIT_STANDARD_HEADERS=true
RATE_LIMIT_LEGACY_HEADERS=false
RATE_LIMIT_MESSAGE=Too many requests, please try again later.

# Auth Endpoints Rate Limiting
RATE_LIMIT_AUTH_ENABLED=true
RATE_LIMIT_AUTH_WINDOW_MS=300000
RATE_LIMIT_AUTH_MAX_REQUESTS=50
RATE_LIMIT_AUTH_MESSAGE=Too many authentication requests, please try again later.

# Public API Rate Limiting
RATE_LIMIT_PUBLIC_ENABLED=true
RATE_LIMIT_PUBLIC_WINDOW_MS=3600000
RATE_LIMIT_PUBLIC_MAX_REQUESTS=1000
RATE_LIMIT_PUBLIC_MESSAGE=Too many API requests, please try again later.

# Admin Endpoints Rate Limiting
RATE_LIMIT_ADMIN_ENABLED=true
RATE_LIMIT_ADMIN_WINDOW_MS=600000
RATE_LIMIT_ADMIN_MAX_REQUESTS=200
RATE_LIMIT_ADMIN_MESSAGE=Too many admin requests, please try again later.

# =============================================================================
# üóúÔ∏è COMPRESSION CONFIGURATION
# =============================================================================
COMPRESSION_ENABLED=true
COMPRESSION_LEVEL=6
COMPRESSION_THRESHOLD=1024
COMPRESSION_CHUNK_SIZE=16384
COMPRESSION_FILTER=text/*,application/json,application/xml,application/javascript
COMPRESSION_EXCLUDE_ENDPOINTS=/health/db,/docs
COMPRESSION_ALGORITHMS=gzip,deflate

# =============================================================================
# üîí SECURITY CONFIGURATION
# =============================================================================
SECURITY_ENABLED=true
SECURITY_HEADERS_ENABLED=true

# Security Headers
SECURITY_CONTENT_SECURITY_POLICY=default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline';
SECURITY_STRICT_TRANSPORT_SECURITY=max-age=31536000; includeSubDomains
SECURITY_X_FRAME_OPTIONS=SAMEORIGIN
SECURITY_X_CONTENT_TYPE_OPTIONS=nosniff
SECURITY_X_XSS_PROTECTION=1; mode=block
SECURITY_REFERRER_POLICY=strict-origin-when-cross-origin
SECURITY_PERMISSIONS_POLICY=camera=(), microphone=(), geolocation=()

# =============================================================================
# ‚úÖ VALIDATION CONFIGURATION
# =============================================================================
VALIDATION_MAX_BODY_SIZE=10485760
VALIDATION_MAX_REQUEST_TIME=30000
VALIDATION_ALLOWED_CONTENT_TYPES=application/json,multipart/form-data
VALIDATION_REQUIRED_HEADERS=user-agent
VALIDATION_CLERK_AUTH_ENABLED=true
VALIDATION_CLERK_AUTH_HEADERS=authorization
VALIDATION_SANITIZE_ENABLED=true
VALIDATION_SANITIZE_MAX_STRING_LENGTH=1000
VALIDATION_SANITIZE_REMOVE_HTML_TAGS=true
VALIDATION_SANITIZE_ALLOWED_CHARS=[\w\s\-.,!?@#$%&*()+=]

# =============================================================================
# üì§ RESPONSE FORMATTING
# =============================================================================
RESPONSE_FORMAT_ENABLED=true
RESPONSE_INCLUDE_TIMESTAMP=true
RESPONSE_INCLUDE_VERSION=true
RESPONSE_API_VERSION=1.0.0
RESPONSE_INCLUDE_REQUEST_ID=true
RESPONSE_INCLUDE_METADATA=true
RESPONSE_SUCCESS_MESSAGE=Success
RESPONSE_ERROR_MESSAGE=An error occurred

# =============================================================================
# üåç INTERNATIONALIZATION
# =============================================================================
PUBLIC_DEFAULT_LOCALE=es                              # üü° OPTIONAL (default: es)
PUBLIC_SUPPORTED_LOCALES=es,en,pt                     # üü° OPTIONAL (default: es,en,pt)

# =============================================================================
# üìä MONITORING & METRICS
# =============================================================================
# Sentry Configuration
PUBLIC_SENTRY_DSN=https://your-dsn@sentry.io/project-id  # üü° OPTIONAL (for error tracking)
SENTRY_ENVIRONMENT=development                         # üü° OPTIONAL (default: development)
SENTRY_RELEASE=1.0.0                                  # üü° OPTIONAL (for release tracking)

# Metrics Configuration
METRICS_ENABLED=true                                   # üü° OPTIONAL (default: true)
METRICS_SLOW_REQUEST_THRESHOLD_MS=1000                 # üü° OPTIONAL (default: 1000)
METRICS_SLOW_AUTH_THRESHOLD_MS=2000                    # üü° OPTIONAL (default: 2000)

# =============================================================================
# üîß TODO-LINEAR INTEGRATION
# =============================================================================
LINEAR_API_KEY=lin_api_your_key_here                   # üü° OPTIONAL (only if using TODO sync)
LINEAR_TEAM_ID=your-linear-team-id                     # üü° OPTIONAL (only if using TODO sync)
TODO_LINEAR_DEFAULT_USER_EMAIL=developer@hospeda.com  # üü° OPTIONAL (only if using TODO sync)
TODO_LINEAR_DEFAULT_USER_ID=your-linear-user-id       # üü° OPTIONAL (only if using TODO sync)
TODO_LINEAR_DEFAULT_USER_NAME=Developer Name          # üü° OPTIONAL (only if using TODO sync)

# =============================================================================
# üå± SEEDING CONFIGURATION
# =============================================================================
SEED_AUTH_PROVIDER=CLERK                               # üü° OPTIONAL (only for seeding)
SEED_SUPER_ADMIN_AUTH_PROVIDER_USER_ID=your-super-admin-id  # üü° OPTIONAL (only for seeding)

# =============================================================================
# üõ†Ô∏è DEVELOPMENT & DEBUGGING
# =============================================================================
DEBUG_ACTOR_ID=                                       # üü° OPTIONAL (only for admin debugging)
COMMIT_SHA=                                           # üü° OPTIONAL (auto-set in CI/CD)

# =============================================================================
# üß™ TESTING CONFIGURATION
# =============================================================================
TESTING_RATE_LIMIT=false                              # üü° OPTIONAL (only for testing)