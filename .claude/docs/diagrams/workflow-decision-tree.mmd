%%{init: {'theme':'base', 'themeVariables': {'primaryColor':'#3B82F6','primaryTextColor':'#fff','primaryBorderColor':'#2563EB','lineColor':'#6B7280','secondaryColor':'#10B981','tertiaryColor':'#F59E0B'}}}%%
flowchart TD
    Start([New Task/Issue]) --> Assess{Assess<br/>Task}
    
    %% Quick Fix Path
    Assess --> QuickCheck{< 30 min<br/>1-2 files<br/>Very low risk?}
    QuickCheck -->|Yes| QuickFix[Level 1: Quick Fix]
    QuickFix --> QuickSteps[6 Steps:<br/>1. Verify<br/>2. Change<br/>3. Validate<br/>4. Commit<br/>5. Push<br/>6. Done]
    QuickSteps --> QuickEnd([Complete!])
    
    %% Atomic Task Path
    QuickCheck -->|No| AtomicCheck{30min-3h<br/>2-10 files<br/>Low-med risk?}
    AtomicCheck -->|Yes| Atomic[Level 2: Atomic Task]
    Atomic --> AtomicSteps[11 Steps:<br/>1. Create PB-XXX<br/>2. Tech Analysis<br/>3. Review<br/>4. Tests RED<br/>5. Implement GREEN<br/>6. Refactor<br/>7. Docs<br/>8. Coverage<br/>9. Quality<br/>10. Commit<br/>11. Registry]
    AtomicSteps --> AtomicEnd([Complete!])
    
    %% Feature Planning Path
    AtomicCheck -->|No| FeatureCheck{Multi-day<br/>Architecture<br/>DB changes?}
    FeatureCheck -->|Yes| Feature[Level 3: Feature Planning]
    Feature --> FeatureSteps[4 Phases:<br/>Phase 1: Planning<br/>Phase 2: Implementation<br/>Phase 3: Validation<br/>Phase 4: Finalization]
    FeatureSteps --> FeatureEnd([Complete!])
    
    %% Error handling
    FeatureCheck -->|Unclear| Clarify{Need more<br/>information?}
    Clarify -->|Yes| Gather[Gather Requirements]
    Gather --> Assess
    Clarify -->|No| DefaultPath[Use Level 2<br/>when uncertain]
    DefaultPath --> Atomic
    
    classDef quickClass fill:#10B981,stroke:#059669,color:#fff
    classDef atomicClass fill:#F59E0B,stroke:#D97706,color:#fff
    classDef featureClass fill:#3B82F6,stroke:#2563EB,color:#fff
    classDef decisionClass fill:#8B5CF6,stroke:#7C3AED,color:#fff
    
    class QuickFix,QuickSteps,QuickEnd quickClass
    class Atomic,AtomicSteps,AtomicEnd atomicClass
    class Feature,FeatureSteps,FeatureEnd featureClass
    class QuickCheck,AtomicCheck,FeatureCheck,Clarify decisionClass
